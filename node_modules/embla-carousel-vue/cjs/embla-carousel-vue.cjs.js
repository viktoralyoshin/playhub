'use strict';

var vue = require('vue');
var emblaCarouselReactiveUtils = require('embla-carousel-reactive-utils');
var EmblaCarousel = require('embla-carousel');

function emblaCarouselVue(options = {}, plugins = []) {
  const storedOptions = vue.ref(vue.isRef(options) ? options.value : options);
  const storedPlugins = vue.ref(vue.isRef(plugins) ? plugins.value : plugins);
  const emblaNode = vue.ref();
  const emblaApi = vue.ref();
  function reInit() {
    if (!emblaApi.value) return;
    emblaApi.value.reInit(storedOptions.value, storedPlugins.value);
  }
  vue.onMounted(() => {
    if (!emblaCarouselReactiveUtils.canUseDOM() || !emblaNode.value) return;
    EmblaCarousel.globalOptions = emblaCarouselVue.globalOptions;
    emblaApi.value = EmblaCarousel(emblaNode.value, storedOptions.value, storedPlugins.value);
  });
  vue.onBeforeUnmount(() => {
    if (emblaApi.value) emblaApi.value.destroy();
  });
  if (vue.isRef(options)) {
    vue.watch(options, newOptions => {
      if (emblaCarouselReactiveUtils.areOptionsEqual(storedOptions.value, newOptions)) return;
      storedOptions.value = newOptions;
      reInit();
    });
  }
  if (vue.isRef(plugins)) {
    vue.watch(plugins, newPlugins => {
      if (emblaCarouselReactiveUtils.arePluginsEqual(storedPlugins.value, newPlugins)) return;
      storedPlugins.value = newPlugins;
      reInit();
    });
  }
  return [emblaNode, emblaApi];
}
emblaCarouselVue.globalOptions = undefined;

module.exports = emblaCarouselVue;
//# sourceMappingURL=embla-carousel-vue.cjs.js.map
